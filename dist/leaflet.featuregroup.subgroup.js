!function(e,o){"function"==typeof define&&define.amd?define(["leaflet"],function(t){return e.L.FeatureGroup.SubGroup=o(t)}):"object"==typeof module&&module.exports?module.exports=o(require("leaflet")):e.L.FeatureGroup.SubGroup=o(e.L)}(this,function(e){var o=e.FeatureGroup,t=o.prototype,r=e.LayerGroup,n=o.extend({statics:{version:"0.1.0"},initialize:function(e,o){t.initialize.call(this,o),this.setParentGroup(e)},setParentGroup:function(e){return this._parentGroup=e,this.onAdd=e instanceof r?"function"==typeof e.addLayers?this._onAddToGroupBatch:this._onAddToGroup:this._onAddToMap,this.onRemove=e instanceof r?"function"==typeof e.removeLayers?this._onRemoveFromGroupBatch:this._onRemoveFromGroup:this._onRemoveFromMap,this},setParentGroupSafe:function(e){var o=this._map;return o&&o.removeLayer(this),this.setParentGroup(e),o&&o.addLayer(this),this},getParentGroup:function(){return this._parentGroup},_onAddToGroupBatch:function(e){var o=this.getLayers();this._map=e,this._parentGroup.addLayers(o)},_onRemoveFromGroupBatch:function(e){var o=this.getLayers();this._parentGroup.removeLayers(o),this._map=null},_onAddToGroup:function(e){var o=this._parentGroup;this._map=e,this.eachLayer(o.addLayer,o)},_onRemoveFromGroup:function(e){var o=this._parentGroup;this.eachLayer(o.removeLayer,o),this._map=null},_onAddToMap:t.onAdd,_onRemoveFromMap:t.onRemove});return e.featureGroup.subGroup=function(e,t){return new o.SubGroup(e,t)},n});